// Reduce register usage by moving tmp declaration outside the loop
// Remove unnecessary repetitive computation in loop