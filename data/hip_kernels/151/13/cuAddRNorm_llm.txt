```c
// Use dynamic shared memory and only load vector values once per block
// Ensure all threads have valid indices
```