// Calculate row and col once to reduce redundant computations
// Use a single if condition for efficient bounds checking
// Improve memory access patterns for coalescing
// Use constants for color channel indices to avoid magic numbers