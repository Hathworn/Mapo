```
// Optimize by using a single loop with fewer conditional checks
// Use warp reduction for faster summation
// Single thread division after warp reduction
```