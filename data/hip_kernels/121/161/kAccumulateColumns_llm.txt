```
// Reduce global memory accesses by using shared memory for `indices`.
// Ensure threads are synchronized after loading `indices` into shared memory.
// Optimize division operation by using a ternary operator for better performance.
// Minimize branching by restructuring conditional statements if possible.
```