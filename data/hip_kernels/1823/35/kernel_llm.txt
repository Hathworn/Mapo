```c
// Reduce memory bandwidth by using shared memory for frequently accessed data
// Ensure coalesced memory access patterns for ptr array
// Minimize global memory accesses where possible by reusing computed values in registers
// Optimize grid and block dimensions to improve memory access patterns and occupancy
```