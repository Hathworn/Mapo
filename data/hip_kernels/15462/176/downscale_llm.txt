```c
// Cache scale_factor to avoid multiple recalculations in the loop.
```